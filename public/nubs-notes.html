<dom-module id="nubs-notes">
	<template>
		<style>
			:host {
				display: block;
				padding: 10px;
			}

			.nubs-notes-card {
				width: 500px;
			}
			.nubs-card-actions {
				display: flex;
			}
			paper-button#add {
				width: 100px;
			}
			#create {
				width: 100%;
			}
			#notes-list {
				list-style: none;
				padding: 0;
				margin: 0;
			}
		</style>

		<firebase-auth user="{{user}}"></firebase-auth>
		<firebase-query id="query" path="/notes/[[user.uid]]/notes" data="{{notes}}"></firebase-query>

		<paper-card class="nubs-notes-card">
			<div class="card-content">
				<div id="notes">
					<ul id="notes-list">
					<template is="dom-repeat" items="[[notes]]" as="note">
						<li>
							<p class="content">[[note.content]]</p>
							<paper-icon-button icon="clear" note="[[note]]" on-tap="remove"></paper-icon-button>
						</li>
					</template>
					</ul>
				</div>
			</div>
			<div class="card-actions nubs-card-actions">
				<paper-input id="input" label="Take a note..."></paper-input>
				<paper-button id="add" on-tap="add">Add</paper-button>
			</div>
		</paper-card>
	</template>
	<script>
		Polymer({
			is: 'nubs-notes',
			properties: {
				notes: {
					type: Object
				}
			},
			add: function() {
				this.$.query.ref.push({
				content: this.$.input.value
			});
				this.$.input.value = null;
			},
			remove: function(e) {
				var key = e.currentTarget.note.$key;
				this.$.query.ref.child(key).remove();
			}
		});
	</script>
</dom-module>